# Facilitator Technical Manual

As a _MTL_ Facilitator, the following chapters will help answer any technical questions you may have when preparing for your team's live session.

<img src="https://raw.githubusercontent.com/lzim/teampsd/b18320cdba8e0e4392d5c732785889b64efffb7e/resources/logos/mtl_how_facilitate.svg" height="175px" width='290px'/>

## Facilitator Maps

- [**_MTL_ Blue**](https://github.com/lzim/mtl/tree/master/blue/session01/s01_facilitator/mtl_blue_facilitator_map.md)

- [**_MTL_ Red**](https://github.com/lzim/mtl/tree/master/red/part1/part1_facilitator/mtl_red_facilitator_map.md)

### CPT Code Cheatsheet

- [CPT Code Cheatsheet](https://github.com/lzim/mtl/blob/master/blue/session02/s02_resources/cptcode_cheatsheet.pdf)

### _MTL_ 3.0 Data Cheatsheet

- [_MTL_ 3.0 Data Cheatsheet](https://github.com/lzim/mtl/blob/master/blue/session02/s02_resources/mtl_how_3.0_data_cheatsheet.pdf)

### Sim UI Cheatsheet

- [Sim UI Cheatsheet](https://github.com/lzim/mtl/tree/master/blue/session05/s05_learner)

## Create an Account or Team

Follow the instructions below to create an account or team in the Sim UI. Once the registration form is completed, a notice will be sent to _MTL_ for approval. Once approved, the user will be notified by email they now have access to the dashboard. See the next section for information on how to use the dashboard to manage an _MTL_ team.

1. Navigate to [mtl.how/register](https://forio.com/app/va/va-psd-sim/register.html) in your Edge, Firefox, or Chrome browser.

2. Click on Create Account or Team in the login window:

<img src = "https://github.com/lzim/mtl/blob/gh-pages/images/self_registration_login_screen.png?raw=true">

3. Complete the form as shown below:

- **1 - First Name**: Enter your first name.

- **2 - Last Name**: Enter your last name.

- **3 - VA Email**: Enter your VA email.

- **4 - New Password**: Create a password and enter it here. Tip: Write it down so you don’t forget.

    - **Note:** Your password must contain at least 1 number.
  
- **5 - Repeat Password**: Re-enter the password you just created. Tip: To check if both passwords match, click the eye with a slash icon in each field to reveal what you typed.

- **6 - Select VHA Primary Role**: Select your primary VHA role from the dropdown menu. Choices are: Clinician, Data Subject Matter Expert, Leader/Manager, Quality Improvement, Researcher/Evaluator, Systems Modeler, and Other.

- **7 - VISN**: Select your VISN from the dropdown menu.

- **8 - Facility**: Select your facility from the dropdown menu.

- **9 - Clinic**: Select your clinic from the dropdown menu. This field is _not_ required.

- **10 - Select or Create a Facility Team**: _If you are a **team lead**_: Do nothing here; this is the option you want. _If you are a **team member**_: Select your existing team from the dropdown menu.

<img src = "https://github.com/lzim/mtl/blob/gh-pages/images/self_registration_form.png?raw=true">

4. Click the green Submit button. If you are the first person to register from your Facility Team, the following pop-up window will appear (with your VISN, Facility, and Clinic pre-populated):

<img src = "https://github.com/lzim/mtl/blob/gh-pages/images/self_registration_popup_team_name.png?raw=true">

5. This step only applies _**team leads**:_ Enter your Facility Team name in the pop-up window (immediately after the pre-populated information).

- **Note:** You must only use lowercase letters.
- **Note:** You must use the underscore character (_) instead of spaces.

6. Click the green Submit button. The following message will appear for a few seconds in the upper right-hand corner of your browser window:

<img src = "https://github.com/lzim/mtl/blob/gh-pages/images/self_registration_forwarded_approver.png?raw=true">

7. After your registration request is reviewed and approved, an approval email will be sent to your VA address that contains login information for accessing the _MTL_ Sim UI.

<img src = "https://github.com/lzim/mtl/blob/gh-pages/images/self_registration_approval_email.png?raw=true">

## Sim UI Facilitator Dashboard

This section explains how to use the Facilitator Dashboard to set up and manage teams. It also orients users to the Dynamic Decision Dashboard and explains how to access mtl.how/menu and set up _MTL_ Report content. Below is an orientation to the Dashboard.

> replace w/new screenshot - renamed to Administrator Dashboard (also change section title)

<img src = "https://github.com/lzim/mtl/blob/gh-pages/images/dashboard_overview.png?raw=true">

1. **Tutor** - Click for a guided tour of page features.

2. **mtl Reports** - Click to set up the information that will show in the generated _MTL_ Report. See the section on producing an _MTL_ Report below.

3. **Settings** - Click to set up a team. It provides team setup input screens and a means to load Team Data. See the section on team setup below.

4. **Team Statistics** - Lists experiments, when they started and ended, total time-on-task, team size, attendance percentage, and completion percentage.

5. **Team Roster** - Lists team members, their clinical role, and team role.

6. **_MTL_ Manual** - Click to open a comprehensive program and technical guide about _Modeling to Learn_.

7. **Home** - Click to go to the selected teams' home page. This will take you to the Dynamic Decision Dashboard.

8. **Go to Current Session** - Click to access the teams' current session. If the "Go to Current Session" button is washed out, there is no current session.

9. **Select Team** - Use this dropdown to select your desired team. It will enable you to monitor their experiments.

10. **Gauges** - This indicates the teams' progress with a selected experiment. Teams receive 20% completion for a minimum 50 characters input for each of the Question, Hypothesis, Findings, Decisions fields and another 20% for running the experiment.

11. **Select Experiment** - Use this dropdown to select the desired experiment to monitor. An experiment will not show in this dropdown until it has been named and saved.

12. **Expand / Collapse Dropdown Triangle** - Manage and monitor multiple teams by selecting this dropdown.

13. **CLOSE** - Click to de-select a team.

14. **ADD TEAM** - Click to add an unlimited number of teams to the dashboard. 

## Set Up a Team

This section describes how to set up a team manually. Once team setup is complete, users can access mtl.how/menu and use the Dynamic Decision Dashboard.

1. Click the "Add" button. A Team Setup popup will appear.  **The Team Setup will not list all teams in Epicenter. It will only list teams assigned to the user.**

<img src = "https://github.com/lzim/mtl/blob/gh-pages/images/team_setup_overview.png?raw=true">

2. Add the team name.  Just add the teams' root name. The setup function will automatically add "_team", "_ind", and "_shared" extensions in Epicenter.

3. Type the teams' vision statement.

4. Click "Add" button to add a team member. A Setup - Add Members popup will appear. **Facilitators do not need to register with the team, because the system will automatically assign based on the login. However, a co-facilitator would have to be listed and assigned to the facilitator role.**

<img src = "https://github.com/lzim/mtl/blob/gh-pages/images/add_team_pop_up.png?raw=true">

5. Enter First Name, Last Name, and Email.

6. Use the Select Permissions to select team members' permissions on the team.

7. Use the Select VHA Primary Role to select team members' role on the team.

8. Click the "Add" button.

  - Note: Click the checkbox next to a name and "Edit" or "Delete" to update information or delete a team member.

9. Click "Done" button when finished.

<img src = "https://github.com/lzim/mtl/blob/gh-pages/images/add_team_member_popup.png?raw=true">

## Review tt Reports Menu Results

If you are a Facilitator, use your login to access the facilitator tools to access multiple team’s menu results. The system knows you are a facilitator based on your user id and will present the facilitator popup. From the popup, you can review the results of multiple teams.

1. Navigate to mtl.how/menu.

<image src = "https://github.com/lzim/mtl/blob/gh-pages/images/menu_url.png?raw=true">

2. Enter user id, password, and click Login.

<image src = "https://github.com/lzim/mtl/blob/gh-pages/images/menu_login.png?raw=true">

3. Select the team from whom you want to view results from the dropdown (you may monitor three teams simultaneously).

<image src = "https://github.com/lzim/mtl/blob/gh-pages/images/menu_select_team.png?raw=true">

4. Click Review Results icon to the results of the team's mtl.how/menu responses.

<image src = "https://github.com/lzim/mtl/blob/gh-pages/images/menu_results.png?raw=true">

5. Click PDF icon to download a PDF file of the report.

<image src = "https://github.com/lzim/mtl/blob/gh-pages/images/menu_PDF.png?raw=true">

6. Click Open file to see results in PDF format.

<image src = "https://github.com/lzim/mtl/blob/gh-pages/images/menu_download.png?raw=true">

## Make, View, and Export Team Clinic Selections for Import to Sim UI

- All users must follow certain naming conventions, which are explained below, when downloading Team Data files.
- When a Team Data file is downloaded from the Data UI, it is in a specific format that the Sim UI **reformats during upload.** This means that if a Team Data file is downloaded from the Sim UI and then re-uploaded to the Sim UI **it will not work!**

1. Open Chrome, Edge, Safari, or Firefox browser and go to mtl.how/data.

<img src = "https://github.com/lzim/mtl/blob/gh-pages/images/mtl_data_nav.png?raw=true">

2. Using the left-hand navigation pane, navigate to the desired Region and VISN.

<img src = "https://github.com/lzim/mtl/blob/gh-pages/images/mtl_data_visn_nav.png?raw=true">

3. Click on the Clinic Selection tab and select and view your local team data.

<img src = "https://github.com/lzim/mtl/blob/gh-pages/images/mtl_data_select_data.png?raw=true">

- Filter by Division Name, Physical Location, PrimaryStopCode, SecondaryStopCode, and/or Is an Active Clinic? (de-activated clinics denoted by ZZ) in the left and middle columns.
- Search and filter for your team's clinics by clinic name or by provider in the Select Clinics to Generate Report Data column after making selections in the left and middle columns.
- Click the green Apply button to pull Patient Level Data from all clinics selected in the last two years.
- Select clinics that your team refers to in the Team Flow Selection tab to produce data tracking patients stepped up/down for the Team (SP) Flow module.
  - For example, if you are a GMH team, you would select SMH in the dropdown for "The clinics selected below that my team refers to are" and add the SMH clinics your team refers to in the Green column, second row.
  - In the bottom right-hand columns for the three possible care settings (GMH, SMH, PC/PCMHI) indicate the threshold for minimum gap in patient care required for subsequent visit to be considered a new care episode. In general, for the (GMH or SMH or PC/PCMHI) setting, how long of a gap in patient care is required for the subsequent visit to be considered a new care episode? Set the threshold below in months. The default threshold is 9 months (39 weeks).
- Click Apply.

- **Notes:** 
  - Are the clinics and data not populating? Request and verify your local server views (see section below titled Request and Verify Local Server View Permissions).
  - If you wish to have quick access to these Clinic Selections in the future, you can make a personal bookmark to return to it. Go to the Bookmarks drop-down menu and click on Add a personal bookmark. In the bookmark name field, use Team PSD convention for the name: Sta3n_Division Name_Date (date in yyyy_mm_dd format), then select Save.

<img src = "https://github.com/lzim/mtl/blob/gh-pages/images/mtl_data_bookmark.png?raw=true">

4. Scroll until you see the View Clinic Selections tab on the left-hand side.

<img src = "https://github.com/lzim/mtl/blob/gh-pages/images/mtl_data_nav_team_data_1.png?raw=true">

5. Hover over the Clinic Name -> Providers heading and click on the ellipsis that appears.

<img src = "https://github.com/lzim/mtl/blob/gh-pages/images/mtl_data_nav_team_data_2.png?raw=true">

6. Click Export Data > Data with Current Layout > Export.

<img src = "https://github.com/lzim/mtl/blob/gh-pages/images/mtl_data_export_team_data_1.png?raw=true">

7. The Team Data file is exported to your browser's download location. Save using our Team naming convention "Sta3n_geo-location_clinic_year_month_day" and post the file on the shared Team channel for Team members to view and confirm selections. 

<img src = "https://github.com/lzim/mtl/blob/gh-pages/images/mtl_data_file_name.png?raw=true">

8. Repeat steps 2-6 with Team Flow Selections.

**Tips & Tricks:**

> include link to or screenshot of data_cheatsheet here?

> cannot find site list xlsb mentioned below:

- Use the clinic selection table (mtl_site_list_sta6a_203_08_09 (version 1).xlsb to find the full Sta6a. 
- To clear filters/columns, click on the Eraser icon in the upper right of the filters/columns.
- To reset ALL selections across ALL tabs, click the Reset button in the upper right hand of the bar.

<img src = "https://github.com/lzim/mtl/blob/gh-pages/images/mtl_data_eraser_reset.png?raw=true">

> LM cannot find the focus mode mentioned below:

- To zoom into the screen, hover in the upper right-hand corner of the screen until a set of icons appear.
  - Click on the square Focus Mode icon. Click Back to Report to return to the previous view.

> steps 9 & 10 below & associated T&Ts not so much about Clinic Selections; remove?

9. Click to view the vizDiag tab which shows team trends.

- Zoom out and see team trends for diagnoses (Diag), encounters (Enc), health factor data (HF; e.g., suicide plans, evidence-based practice templates), measures (Meas), and behavioral and suicide risks (Flag) from Mental Health Assistant. Click on the respective tabs (Diag, Enc, etc.) to view these trends.
- Another way to see encounters or services decreasing or increasing is by viewing the number of visits by right clicking on any trend line and click Show As Table.
- Filter trends to zoom into a specific team trend by navigating to the right side of the screen and click on the Funnel icon to reveal the filter panel.
- vizDiag in the data UI shows a trend lines by diagnoses or combination of diagnoses. For example, the PTSD line is for patients with only PTSD. The PTSD & AUD line is for patients with both these diagnoses but does not discriminate between which is the primary, secondary, etc. diagnoses.

**Tips & Tricks:** 

- Right click on any trend line and click Show As Table to see encounters or services decrease or increase by viewing the number of visits.
- Filter trends to zoom into a specific team trend by navigating to the right side of the screen and click on the "Funnel" icon to reveal the filter panel.
- If you do not see something that you would expect or previously saw, check to see if a filter is applied.
- Click on the funnel icon in the top upper right. Filters are active if it says "Filters and slicers affecting this visual."

10. Click to view the “data” tabs, which show your team’s individual patient information. 

- In the data tabs, providers can zoom in on specific veterans. Patient information corresponds to the same categories as the team trends: diagnoses (Diag), encounters (Enc), health factor data (HF; e.g., suicide plans, evidence-based practice templates), measures (Meas), and behavioral and suicide risks (Flag) from Mental Health Assistant.
- Providers can filter to find specific patients or produce reports by navigating to the right side of the screen and clicking on the "Funnel" icon to reveal the filter panel.

**Tips & Tricks:**

- dataDiag in the data UI has an additional column after Diagnoses of Interest, called Primary Diagnoses, specifying which diagnosis is primary to help providers better understand the characteristics of the patient population.
- Patients who have requested restricted access to their information have asterisks (******) in the Patient Name column. If you are a VA provider, you can still identify patients from the Patient SSN column, or Patient Name column.
- If you do not see something that you would expect or previously saw, check to see if a filter is applied.
  - Click on the funnel icon in the top upper right. Filters are active if it says "Filters and slicers affecting this visual." 
	
## Request and Verify Local Server View Permissions

To pull patient and clinic level data, you need LSV permissions. Check which facilities you have LSV access for [here](https://vaww.pbi.cdw.va.gov/PBIRS/Pages/ReportViewer.aspx?/GPE/PBM_AD/SSRS/LSVAccessVerification) through VA intranet. Clinical Resource Hub Providers are granted to multiple local server access.

If you do not have access to facilities that you believe you should, please verify:

1. CPRS access/permissions at your station (i.e., COR tab access for CPRS).

2. Your network username recorded in VistA. To have your network username recording in VistA, please follow instructions [here](https://dvagov.sharepoint.com/sites/oitbislstaff/FieldOpsAndDataServices/fr/SitePages/CPRS_NetworkUserName.aspx) through VA intranet.

- If you are still unable to pull data or access the data UI, please email us at MTL.Help@va.gov
- **Note:** If you need access to all sites (e.g., national), click [here](https://dvagov.sharepoint.com/sites/vhaacademicdetailing/SitePages/How-To-Request-Access-to-Data-Tools.aspx) and follow the steps in  “Request Access to Data Tools” section below.

## Request Access to Data Tools

1. Click [here](https://epas.r02.med.va.gov/submit.cfm?action=select&doc_type=690) to access the OI&T Electronic Permission Access System.

2. Verify VHA NDS Access Form for Health Operations is selected in the Select Document dropdown, then click Create Document.

<img src = "https://github.com/lzim/mtl/blob/gh-pages/images/access_data_tools_1.png?raw=true">

3. Fill in the form as follows:

**Note:** the following fields will be pre-populated: Full Legal Name, Job Title, Email Address, Active Directory Name with Domain, and Work Telephone Number.

<img src = "https://github.com/lzim/mtl/blob/gh-pages/images/access_data_tools_form.png?raw=true">

- **1 - Employee Agency**: Veterans Health Administration 

- **2 - Employee Type**: VA Employee (yes, for all of you, none of you are “contractors”). New fields will appear.

- **3 - Lookup Supervisor**: Search for "zimmerman, l".

<img src = "https://github.com/lzim/mtl/blob/gh-pages/images/access_data_tools_super_search.png?raw=true">

- **4 - Purpose of Use**: Healthcare Operations

- **5 - Data Sources**: Select Corporate Data Warehouse (CDW)

- **6 - Duration of Access**: Select “I will need access during the duration of my position.” from the dropdown. 

- **7 - Affirmation**: Check the box.
  
4. Scroll towards the top of the screen and select the Corporate Data Warehouse (CDW) tab.

<img src = "https://github.com/lzim/mtl/blob/gh-pages/images/access_data_tools_cdw_tab.png?raw=true">

5. Make the following selections **after** selecting the CDW SQL Datasets checkbox: 

<img src = "https://github.com/lzim/mtl/blob/gh-pages/images/access_data_tools_cdw_selections.png?raw=true">

- Basic Read Access (CDW_Full)
- Privileged Read patient Access (CDW_SPatient)
- Staff Real SSN Access (CDW_SStaff)
- MCA (DSS) Access (CDW_DSS)
- Outpatient SQL Files (CDW_SE_IE_SF)

6. Now select the Comments tab. Copy/paste in the following rationale provided to you: 

- I support the Modeling to Learn national operational quality improvement project led by the VA Office of Mental Health and Suicide Prevention (OMHSP). This initiative includes a national Power BI Report in which frontline staff access local operations data as part of their quality improvement activities.

7. Click Save and Submit.

---
> **OLD INFO**
> 1. Type [mtl.how/data](mtl.how/data) into your Chrome, Edge, Safari or Firefox browser.
> 
>  <image src = "https://github.com/lzim/mtl/blob/gh-pages/images/mtl_data_nav.png?raw=true">
> 
> 2. Navigate to the desired Region and VISN.
> 
>  <image src = "https://github.com/lzim/mtl/blob/gh-pages/images/mtl_data_visn_nav.png?raw=true">
> 
> 3. Select and apply clinical and/or team flow data.
> 
>  <image src = "https://github.com/lzim/mtl/blob/gh-pages/images/mtl_data_select_data.png?raw=true">
> 
> 4. In left-hand navigation, scroll down to "Team Data for SimUI" and click.
> 
>  <image src = "https://github.com/lzim/mtl/blob/gh-pages/images/mtl_data_nav_team_data_1.png?raw=true">
> 
> 5. After the file builds, click on the ellipses on the right side and click "Export data." Select default "Data with current layout" and click "Export."
> 
>  <image src = "https://github.com/lzim/mtl/blob/gh-pages/images/mtl_data_export_team_data_1.png?raw=true">
> 
>  <image src = "https://github.com/lzim/mtl/blob/gh-pages/images/mtl_data_export_team_data_2.png?raw=true">
>  
> 6. The Team Data file is exported to your browser's download location. Open file location and rename file using the convention "Sta3n-number_geo-location_clinic_year_month_day."
> 
>  <image src = "https://github.com/lzim/mtl/blob/gh-pages/images/mtl_data_file_name.png?raw=true">
> 
> 7. Upload data into Sim UI.
---

## Manage and Upload Team Data

1. In the Facilitator Dashboard, click Settings in the middle right-hand side of the dashboard.

> replace w/new screenshot - showing Administrator Dashboard (vs Facilitator) + Settings (vs Team Setup):
<img src = "https://github.com/lzim/mtl/blob/gh-pages/images/nav_to_team_setup.png?raw=true">

2. Select team data file(s) you want to upload and click the "Add" button to add the file.

- **NOTE:** Facilitators can upload team data files themselves and assign that file to team(s) of their choice. If a team data file has already been uploaded to the vault, but not for your team, you can add it by selecting it from the list of data files given here.

<img src = "https://github.com/lzim/mtl/blob/gh-pages/images/manage_team_data.png?raw=true">
 
3. A Please select a world popup will appear.  Select the worlds, within which, the team data will appear. 

<img src = "https://github.com/lzim/mtl/blob/gh-pages/images/fac_db_select_worlds.png?raw=true">
 
4. Click Upload. A popup window will appear asking if the data file is in Power BI format. Ensure it is and Press Yes to proceed. The File Manager will appear.

<img src = "https://github.com/lzim/mtl/blob/gh-pages/images/select_file_popup.png?raw=true">

5. Navigate to the location of the downloaded team data file and click on the file name.

6. Click Open to upload the file. Be patient; it may take a while for the file to upload.

> is this information below still relevant?
> 
> **Please Note:**
> 
> - The upload routine must update multiple GitHub repositories and Epicenter, which may take a few minutes. If the file does not appear, try clicking the "Refresh" button.
> - **Do not attempt to upload Team Data file directly to Epicenter,** since the GitHub repository will overwrite the files on the next update and they will not work when you try to access them from the Sim UI.

## Begin a Session in the Dynamic Decision Dashboard

1. From the Facilitator Dashboard, select a team from the Select Team dropdown menu and click Home. This takes you to the Dynamic Decision Dashboard.

> replace w/updated screenshot once dashboard is renamed

<img src = "https://github.com/lzim/mtl/blob/gh-pages/images/ddd_step1_select_team.png?raw=true">

2. Select the desired team data file from the Please Select Team Data dropdown and click GO! A popup will appear.

- **NOTE:** If there is not a team data file in the dropdown, return to the Facilitator Dashboard, click on Settings (gear icon), then select a team data file. Select Add, then click the box(es) next to the team(s) you wish to associate the data file with. Select Add. Navigate back to the Dynamic Decision Dashboard and begin step #2 again.

> replace w/new screenshot showing tutor icon in blue bar of DDD

<img src = "https://github.com/lzim/mtl/blob/gh-pages/images/ddd_step2_select_data.png?raw=true">

3. Make Learning Mode selections using the radio buttons, then click Continue to initialize all modules within the Dynamic Decision Dashboard.

<img src = "https://github.com/lzim/mtl/blob/gh-pages/images/ddd_step3_learning_mode.png?raw=true">

## Dynamic Decision Dashboard

The Dynamic Decision Dashboard is a convenient visual way to help answer the question  _Where is the volume (of veterans) across all modules?_ The primary purpose of these visuals is to help understand the dynamic system that is veteran care. The dashboard shows a visual representation of where veterans accumulate and where the inflow/outflow is coming from/moving to.  This aids in understanding how different quantities change and interact over time within a system and identifying key variables that contribute to the accumulation or depletion of stocks.

Within the Dynamic Decision Dashboard, there are five modules: Care Coordination, Medication Management, Team Flow, Team Care, and Psychotherapy. To the right of each section are icons, each with an associated dropdown menu. Below is an orientation to the Dynamic Decision Dashboard.

> Revise image to show tutor icon at #1 pin:

<img src = "https://github.com/lzim/mtl/blob/gh-pages/images/ddd_initial_screen.png?raw=true">

1. **Tutor**: Click for a guided tour of page features.

2. **Caret**: Click carets next to each module to contract or expand that module from view.

3. **Directives**: Click to show a Directive 1160.01 to _MTL_ crosswalk table that identifies specific references within Directive 1160.01 that requires actions by facilities that are supported by the Data UI and the Sim UI. These actions are linked to _MTL_ reports and _MTL_ use cases that reinforce how the directives are supported in application by other facilities.

4. **More**: Click to reveal other key views of the Care Coordination module. All modules have this feature. Depending on the module selected, the More menu may include:

<img src = "https://github.com/lzim/mtl/blob/gh-pages/images/ddd_more_dropdown.png?raw=true">

- **1 - Feedback Loops**:  Interactive diagrams that aid in visualizing how different variables in a system are causally interrelated. Clicking here will open a pop-up window that shows an associated loop diagram along with Causal Loop Dynamics selections.

- **2 - Flow**: Visualized in Sankey form. Sankey is a type of flow diagram where the width of the arrows is proportional to the flow quantity.

- **3 - Decision Meters**: A quick method to visualize the relevance or significance of different aspects within a group.

- **4 - Episodes of Care**: Graphically shows evidence-based episode of care intervals to get a bird's eye view of how long the length of engagement will be.

- **5 - Play**: Enter the Sim to see the system story and run experiments.

- **6 - Team Data**: A quick link to the _Modeling to Learn_ Data User Interface that will open in a new browser tab.

- **7 - SAIL Data**: A quick link to Strategic Analytics for Improvement and Learning Value Model (SAIL), a system for summarizing hospital system performance within Veterans Health Administration (VHA). This will open in a new browser tab.

5. **Services**: This allows you to see stock values for specific services in Team Care (Intake, Care Coordination, Medication Management, Psychotherapy, Evidence-based Psychotherapy, Adjunctive Services, Group Therapy).

6. **Text with Red Background**: Indicates which Learning Mode the data prioritizes.

7. **Meds Needed**: This allows you to see stock values for medication-specific services (Alcohol Use Disorder, Depression, Opioid Use Disorder, and Other).

8. **"i" icon**: Click these to read the definition of each stock label.

9. **Setting**: This allows you to see stock values for setting-specific services in Team Flow (General Mental Health, Specialty Mental Health, Primary Care/Primary Care Mental Health Integration).

10. **Community**: Click here to participate by sharing an idea, letting the team know what you like, asking a question, or joining our community.

### Feedback Loops

Causal loop diagrams (also called Feedback Loops/Dynamic Feedback Loops) are interactive diagrams that help visualize how different variables in a system are causally interrelated. Feedback loops involve the output of a system being fed back into the system as input. They are essential for understanding and analyzing the behavior of dynamic systems. 

Each story has its own unique feedback loop. For illustrative purposes, the Team Flow Story is used as an example below to orient you to general Feedback Loop pop-up window features. 

<img src = "https://github.com/lzim/mtl/blob/gh-pages/images/feedback_loop_popup.png?raw=true">

1. **Tutor:** The Tutor button will introduce you to the features of this page. 

2. **Key:** This displays the key for all feedback loops. 

3. **Positive Causal Arrow:** Values at the arrow’s tail (cause) and point (effect) change in the same direction; both increase or both decrease. The plus sign means it is a direct relationship.

4. **Negative Causal Arrow:** Change in the value at the arrow’s tail (cause) make the value at the point (effect) change in the opposite direction. The minus sign means it is an inverse relationship; when one increases, the other decreases.

5. **Widget:** Use the checkboxes to show or hide different loop dynamics.

6. **Link polarities Checkbox:** Select and deselect to show or hide link polarities; the diagram will build as defined.

7. **Loop polarities Checkbox:** Select and deselect to show or hide loop polarities; the diagram will build as defined.

8. **Increase or decrease Checkbox:** Select and deselect to show or hide increase and decrease polarity arrows; the diagram will build as defined.

9. **Widget Dropdown:** Click here to show or hide the widget.

10. **Polarity Arrow:** When these arrows are displayed, users can select any of the arrows by clicking and flip the increase or decrease icons. All the icons in the loop will then flip according to their relationship. 

11. **R Reinforcing Loop:** This is a reinforcing loop; it reinforces runaway increase or decrease - virtuous or vicious behavior.

12. **B Balancing Loop:** This is a balancing loop; it keeps things in balance - stable or stubborn behavior.

13. **Window Size:** Click and drag to resize this window.

14. **Exit:** Click to close this window.

### Flow

> To be developed. 

### Decision Meters

Decision Meters are a quick infographic-based way to identify the highest leverage points and are highly supportive of clinical decision-making; they are for "decider" users who need systems thinking insights. The meters provide a visual interface that provides real-time feedback on ranges in our primary _MTL_ unites of patients/week and appointments/week. The traffic light reflects the current state results and _recommendation_ of future state results. Through dialogue with decision-makers, consultants manually input values into this graphic generator so the decision meters reflect the recommendations based on the alternative scenarios/experiments run by the learner.

- Care Decision Meters are for _MTL_ Blue only.
- Click within each decision meter to edit. Remember to click Save if you want the values to remain.

For illustrative purposes, the Medication Management Decisions window is used as an example below to orient you to general Decisions pop-up window features.

> may need to replace screenshot once development is complete
<img src = "https://github.com/lzim/mtl/blob/gh-pages/images/mm_decisions_popup.png?raw=true">

1. **Tutor:** The Tutor button will introduce you to the features of this page. 

2. **Red:** Click in the shaded area of any red circle to input a value. 

3. **Yellow:** Click in the shaded area of any yellow circle to input a value.

4. **Green:** Click in the shaded area of any green circle to input a value.

5. **Flow:** Suggested patient and appointment load.

6. **Care:** Suggested treatment length and frequency.

7. **Save:** Click to save the values you input.

8. **Exit:** Click to close the pop-up window.

### Episodes of Care

The Episodes of Care window is used to graphically show evidence-based episode of care intervals to get a bird's eye view of how long the length of engagement will be. Available only for Medication Management and Psychotherapy modules, this pop-up integrates engagement duration and Return-to-Clinic Visit Interval (RVI). A 6-month period is shown, where Return-to-Clinic appointments are represented by "X". 

For illustrative purposes, the Medication Management Episodes of Care is used as an example to orient you to general features of this pop-up. 

> revise screenshot once DEV has updated

<img src = "https://github.com/lzim/mtl/blob/gh-pages/images/episode_of_care_popup.png?raw=true">

1. **Tutor:** The Tutor button will introduce you to the features of this page. 

2. **"i" icon:** Click to view the CPT Code Cheatsheet in a new browser tab.

3. **Time Box:** Each rectangle represents one month.

4. **Appointment:** "X" represents a Return-to-Clinic appointment.

5. **Exit:** Click to close the pop-up window.

## Enter and Save an Experiment

This section explains how to enter and save an experiment in the Sim UI.

> check out _MTL_ Session 5 [SEE](https://github.com/lzim/mtl/blob/master/blue/session05/s05_learner/mtl_session05_see.md) and [SAY](https://github.com/lzim/mtl/blob/master/blue/session05/s05_facilitator/mtl_session05_say.md) guides.

### Start a Session in the Sim UI

1. From the Dynamic Decision Dashboard, use the Please Select Team Data dropdown to select your team data file, then click GO!

<img src = "https://github.com/lzim/mtl/blob/gh-pages/images/ddd_select_team.png?raw=true">

2. A Learning Mode pop-up will appear. Make the appropriate selections, then click Continue.

   - **NOTE:** For CC and MM, select your Learning Mode before hitting Play.
   - Refer to the Care Coordination (CCParams) or Medication Management (MMParams) tab of the Team Data Table at mtl.how/data, for data regarding the team’s New Patient Start Rates and Return-to-Clinic Intervals.
   - Once you pick a Learning Mode to prioritize the New Patient Start Rate or the Existing Patients Return-to-Clinic Visit Interval, this will be the setting your team will experiment with for the rest of the _Modeling to Learn_ program.

<img src = "https://github.com/lzim/mtl/blob/gh-pages/images/ddd_learning_mode_popup.png?raw=true">

3. To run a simulation for any module within the dashboard, select Play found within each module's More menu. 

<img src = "https://github.com/lzim/mtl/blob/gh-pages/images/ddd_more_play.png?raw=true">

4. In the Text popup window, populate the Our Question, Our Hypothesis, Our Findings, and Our Decisions text fields.

5. Click Save. A Save Experiment popup will appear.

6. Click Save. A Scenario saved successfully message will appear.

### Orient to the Sim UI

> how / where / if to include more [cheatsheet](https://github.com/lzim/mtl/blob/master/blue/session05/s05_learner/mtl_how_sim_cheatsheet.pdf) info (e.g., home page? navigation bar?)

Below is an orientation to the Play Page of the Sim UI.

<img src = "https://github.com/lzim/mtl/blob/gh-pages/images/mtl_play_page.png?raw=true">

- **1**: Module name.

- **2**: Team Vision.

- **3**: Reveal Dynamics over Time: Reveal more dynamic relationships by clicking the checkboxes. Click Run to simulate outcomes.

- **4**: Outputs & Text: View 6 output charts. Click on expand "T" to open Text (pin #9).

- **5**: Experiments Section.

- **6**: Select previous runs to set experimental sliders and Questions, Hypothesis, Findings, and Decisions (Q/H/F/D) text to that run.

- **7**: Team Data table shows starting values for variables from your data.

- **8**: Move Sliders from initial values and run.

- **9**: Text: Enter Q/H/F/Ds. Click on expand icon in blue bar for full functions.

## Produce a _MTL_ Report

Reports are used to support the consultant, System SME, and Facility Team. This section explains how to use the Facilitator Dashboard to set up and manage _MTL_ reports.

### Set up a Blue _MTL_ Report

> is the below bullet list still accurate/relevant?:
> - The _MTL_ Reports popup allows you to select your team, select experiments to display and the specific charts you want to display in the report.
> - For the Psychotherapy Module, Sankey charts are displayed by default.
> - Psychotherapy charts active in the Sim UI Team Data Table are also active in the _MTL_ report Team Data Table.
> - A team can have only **one** module at a time displayed on the _MTL_ report.
> - If you choose a different module, it will re-render the _MTL_ report page to the selected module.

- Saved data files have PCT or ARTS in their file name; PCT = PTSD Clinical Team, ARTS = Addiction and Recovery Treatment Services.
- Exported Data UI spreadsheets are formatted with all fields shown horizontally.

1. Navigate to the Facilitator Dashboard.

2. Select _mtl_ Reports from the Facilitator Dashboard. The _MTL_ Reports popup will appear.

3. Use the following screenshot and numbered pins to help populate the _MTL_ Reports popup fields. Fields with an asterisk are required.

> screenshot of popup w/numbered pins

**1 - Select Team**: Use this dropdown to select your Team. Experiments from this team will be displayed in the Experiments window below.

**2 – Select Module**: Use this dropdown to select a module you ran experiments in.

**3 – Recommendations Formatting**: Displays text formatting options available within the Recommendations field.

> screenshot of formatting tray w/callouts of what they do ~ DEV is revising as formatting options are currently  more limited than the below list; update when dev is finished

	**1. Undo**: Click once or more to undo your last action(s). 
	**2. Bold**: Click to apply bold.
	**3. Italics**: Click to apply italics.
	**4. Underline**: Click to apply an underline.
	**5. Font size**: Click to apply small, normal, large, or huge font size.
	**6. Text/Background Color**: Click to change text or background color.
	**7. Insert/Remove Bulleted List**: Click to insert or remove a bulleted list.
	**8. Insert/Remove Numbered List**: Click to insert or remove a numbered list.
	**9. Increase Indent**: Increases the indent of selected content.
	**10. Decrease Indent**: Decreases the indent of selected content.
	**11. Import Document**: Click to add a document file to the report. Supported file types are .txt, .doc, and .docx.
 
**4 – Upload Document**: Click to upload a text document into the Recommendations field.

**5 – Recommendations Text Field**: Click in this field to manually type and format your recommendations.
- **NOTE:** ```Ctrl + C``` and ```Ctrl + V``` work in this field to copy and paste text and graphics here.
  
**6 – Select Experiments**: Choose the Experiments you wish to include in the report. 
- **NOTES:**  Checked experiments will appear in the Display list. If you are changing experiments only, be sure to scroll down and click the Save button.
- Regardless of the list order, experiments will be displayed oldest to newest in the _MTL_ report.
- You can select up to 10 experiments for comparison.
  
**7 – [Experiments] Display**: This field will auto-populate the Experiment(s) you selected.

**8 – Select Care Decision Meters**: Select Care Decision Meters you wish to include in the report. Choices are auto-limited by Team and Module selections previously made.

**9 – Select Causal Loop Diagrams**: Select Causal Loop Diagrams you wish to include in the report. Choices are auto-limited by Team and Module selections previously made.

**10 – Select Episodes of Care Calendars**: Select Episodes of Care Calendars you wish to include in the report. Choices are auto-limited by Team and Module selections previously made.

**11 – Select Flow Meters**: Select Flow Meters you wish to include in the report. Choices are auto-limited by Team and Module selections previously made.

**12 – Select Reports**: Choose the Report(s) from your selected Experiment to include in the _MTL_ report.

- It is highly recommended that Blue teams select reports to include.
- Check boxes of the charts you want to display. Selected charts will auto-populate in the Display field to the right.
- Charts will display in order of appearance on the list in the _MTL_ Report.
  
**13 – [Reports] Display**: This field will auto-populate based on Report(s) selected.

**14 – Preview**: Click here to preview your report in a new tab.

**15 – Save**: Click to save your work. Don’t forget to save from time to time!

4. Scroll down to the bottom of the popup and select Save.

- **Note:** This must be done before selecting Preview.

5. After saving your report, you may select Preview to see a preview of the generated report.

> revise bullet point and screenshot below depending on DEV work in progress:

- In the upper right-hand side of the report tab, select the desired report format (Word or PowerPoint). The page will load for a few seconds before giving you an option to open or download your report by clicking Save As.

> screenshot showing DOC/PPT buttons

---
> **OLD INFO:
> 1. Select tt Admin from the Facilitator Dashboard. The tt Reports popup will appear.
> - _MTL_ Report: If you are producing the 1st _MTL_ report, skip to step 5 by signing into [mtl.how/menu](https://mtl.how/menu). See **Managing tt Menu Results** section above for more information.
> 
> <img src = "https://github.com/lzim/mtl/blob/gh-pages/images/select_tt_admin.png?raw=true">
> 
> 2. Select your team and the module they are using from the dropdowns.
> 
> <image src = "https://github.com/lzim/mtl/blob/gh-pages/images/tt_select_tm_mod.png?raw=true">
> 
> - _MTL_ Report 3: If you are producing the last _MTL_ report, check the **tt3** box.
> 
> <image src = "https://github.com/lzim/mtl/blob/gh-pages/images/tt_select_tt3.png?raw=true">
>   
> 3. Experiments should populate under the Select Experiments section with the teams' saved experiments. Select your desired experiments. Checked experiments will appear in the Display list. If you are changing experiments only, > be sure to scroll down and click and click the Save button.
> 
> - **Regardless of the list order, experiments will be displayed oldest to newest in the _MTL_ report.**
> - You can select up to 10 experiments for comparison.
> 
> <image src = "https://github.com/lzim/mtl/blob/gh-pages/images/tt_add_experiments.png?raw=true">
> 
> 4. Under Select Reports, check the boxes of charts you want to display. Selected charts will appear on the Display list to the right. Click Save when done.
>     
> - **The charts will display in order of appearance on the list in the _MTL_ report.**
> 
> <image src = "https://github.com/lzim/mtl/blob/gh-pages/images/tt_select_reports.png?raw=true">
> 
> 5. Sign into [mtl.how/menu](https://mtl.how/menu) and select your team. Click on the PDF icon on the upper right-hand side of the page to download an export of your _MTL_ report.
>     
> - The page will load for a few seconds before giving you an option to download your report by clicking Save As.
> 
> <image src = "https://github.com/lzim/mtl/blob/gh-pages/images/menu_PDF.png?raw=true">
> 
> <image src = "https://github.com/lzim/mtl/blob/gh-pages/images/menu_download.png?raw=true">
---

### Set up a Red _MTL_ Report

- The NIH-Red _MTL_ report only contains team data. **Do not select charts to display.**
- Team data cannot be read directly, it must be converted to an experiment.
- There is a special button in the Team Setup popup for the team data to experiment conversion.
- The team data file must be uploaded before using this procedure.

<image src = "https://github.com/lzim/mtl/blob/gh-pages/images/nav_to_team_setup.png?raw=true">

1. Select Settings from the Facilitator Dashboard. The Settings popup will appear.

> update screenshot:
<image src = "https://github.com/lzim/mtl/blob/gh-pages/images/select_tdata_add_to_tt.png?raw=true">

2. Select the team data file you want to use in the Red _MTL_ report and click the Add to Report button.

> update screenshot:
<image src = "https://github.com/lzim/mtl/blob/gh-pages/images/select_module_tt_red.png?raw=true">

3. Select the desired model, select the desired team from the dropdown, then select Done.

> update screenshot:
<image src = "https://github.com/lzim/mtl/blob/gh-pages/images/select_team_tt_red.png?raw=true">

4. Select _MTL_ Reports. The _MTL_ Reports popup will appear.

> create screenshot

5. Select the desired team from the dropdowns.

> update screenshot:
<img src = "https://github.com/lzim/mtl/blob/gh-pages/images/select_tt_admin.png?raw=true">

6. Scroll down to Select Experiments and select the saved experiment(s) you wish to display in the team's report.

> Paste in steps #2-4 from Produce a Blue Report here? +mention that Select Reports field does not need to be populated.
> _Is a screenshot necessary here?_

7. Scroll down further and click Save.

8. Sign into [mtl.how/menu](https://mtl.how/menu) and select your team. Click on the PDF icon on the upper right-hand side of the page to download an export of your _MTL_ report.

   - The page will load for a few seconds before giving you an option to download your report by clicking Save As.

> update images below:
 <image src = "https://github.com/lzim/mtl/blob/gh-pages/images/menu_PDF.png?raw=true">

 <image src = "https://github.com/lzim/mtl/blob/gh-pages/images/menu_download.png?raw=true">

> **OLD INFO NOT USED:**
> 5. Close the Team Setup popup and click on the mtl Reports button.  The _MTL_ Reports popup will appear.
> 
> <img src = "https://github.com/lzim/mtl/blob/gh-pages/images/setup_tt_red.png?raw=true">
> 
> 6. Select the desired team and modules from the dropdowns. Select the tt red experiment to display in the teams' report.
> 
> <img src = "https://github.com/lzim/mtl/blob/gh-pages/images/tt_reports_done.png?raw=true">
> 
> 9. Scroll down and click Save.

## Manage Discussions in Team

- The Team button in the top navigation is for texting and maintaining private discussion threads with one or more individuals and open discussion threads with teams.
- A person can chat with one or more people using the Team function by inputting the end user name (usually the va.gov email address) of the person or people they want to address.
- A person can chat with an entire team at once, provided they are a registered end user in that team.

### Set up a Private Conversation
  
<img src = "https://github.com/lzim/mtl/blob/gh-pages/images/select_team.png?raw=true">

1. Click "Team" to open the chat popup. 

<img src = "https://github.com/lzim/mtl/blob/gh-pages/images/private_chat.png?raw=true">

2. Click Chat in the left-hand navigation to private-text an individual. The latest conversation will appear in the Chat Log, followed the next recent. The discussion thread appears in the Conversation window.

<img src = "https://github.com/lzim/mtl/blob/gh-pages/images/private_chat_2.png?raw=true">

3. To continue a conversation, type a new message in the message line at the bottom of the window. Click the send icon to post the chat.

<img src = "https://github.com/lzim/mtl/blob/gh-pages/images/new_private_chat.png?raw=true">

4. To start a conversation with one or more new people, click the New icon and enter their user name and click Add.  Type a new message and click send.

### Set up an Open Team Discussion

<img src = "https://github.com/lzim/mtl/blob/gh-pages/images/team_navigation.png?raw=true">

1. Click on the Team icon in the left-hand navigation. **Note how the icon has a red circle indicating there are 2 chats waiting.**

<img src = "https://github.com/lzim/mtl/blob/gh-pages/images/team_listing.png?raw=true">

2. The Teams listing will contain a list of all teams the individual is a registered end user (see blue-green highlight). A boldface team indicates a chat is waiting. **Note the listing contains _ind teams. These are teams where users are assigned an individual world with which to experiment. However, any discussions held in this thread will be visible by all registered users from their different worlds.**  To have a private chat with an individual, see Set up a Private Conversation above.

## Resize a Window for Side-by-Side Viewing
 
- A facilitator may need to show two items on the screen side-by-side for comparison.
- The Sim UI has a responsive design that should accommodate many resolutions and browser window sizes.
- Follow the steps below to get the best view.
 
 1. Click the "window" icon in the upper right of the browser window.

 <image src = "https://github.com/lzim/mtl/blob/gh-pages/images/window_view_click.png?raw=true">
 
 2. Drag the browser window to the desired size. **Notice how the Sim UI design responds by stacking top navigation menu icons.**

 <image src = "https://github.com/lzim/mtl/blob/gh-pages/images/drag_window.png?raw=true">
  
 3. Sometimes items on the screen are cutoff or not formatted correctly.  Click the refresh button so the browser can detect the new window size and adjust the format.
 
 <image src = "https://github.com/lzim/mtl/blob/gh-pages/images/refresh_window.png?raw=true">
  
 4. If the format is still not optimum, decrease the zoom below 100% to reduce the size of the items on the screen, or drag the screen slightly larger.
 
 <image src = "https://github.com/lzim/mtl/blob/gh-pages/images/zoom_window.png?raw=true">
 
## Report a Bug

- There are two ways to report a bug; through the Sim UI and directly into GitHub.
- One must have access to either the Sim UI or GitHub in order to report a bug.

### Report a bug through the Sim UI

1. From the Home Page or from the Play Page  - Click on the "Report Bug" icon.

<image src = "https://github.com/lzim/mtl/blob/gh-pages/images/bug_click_icon.png?raw=true">

2. Describe the issue in the field provided (please be detailed as possible). **Do not include PII or other Site identifiable information. Instead, use generic language such as “MTL Blue live team on Mondays at 9am.”** If you have a screenshot you want to share, click the checkbox.

<image src = "https://github.com/lzim/mtl/blob/gh-pages/images/bug_describe_issue.png?raw=true">

3. Click "Submit" when finished. If you clicked the screenshot checkbox, an additional dialogue will appear to help you upload your picture. **Be sure there are no PII in the screenshot!** Click "Submit" again when finished. The Sim UI will report the bug automatically to GitHub.

<image src = "https://github.com/lzim/mtl/blob/gh-pages/images/bug_screenshot_upload.png?raw=true">

### Report a Bug Directly in GitHub

1. To report a bug directly in GitHub, navigate to [mtl.how/teampsd](mtl.how/teampsd) to get started.  The page below should appear. If not signed in, sign in. Then click "issues" tab.

<image src = "https://github.com/lzim/mtl/blob/gh-pages/images/bug_nav_github.png?raw=true">

2. Click "New Issue" button.

<image src = "https://github.com/lzim/mtl/blob/gh-pages/images/bug_nav_issues.png?raw=true">

3. Click "Get Started" in the "Issue" swim lane.

<image src = "https://github.com/lzim/mtl/blob/gh-pages/images/bug_select_issue.png?raw=true">

4. Complete Issue Form. **Do not include PII or other Site identifiable information. Instead, use generic language such as “MTL Blue live team on Mondays at 9am.”**

<image src = "https://github.com/lzim/mtl/blob/gh-pages/images/bug_issue_form.png?raw=true">

5. Route the form to the "bug_tracker" project for action by Team PSD. Be sure to check the "bug_tracker" is listed under "Projects" (see the second screenshot below).
 
<image src = "https://github.com/lzim/mtl/blob/gh-pages/images/bug_issue_route.png?raw=true">

<image src = "https://github.com/lzim/mtl/blob/gh-pages/images/bug_issue_route_check.png?raw=true">

6. Click "Submit new issue" button.

<image src = "https://github.com/lzim/mtl/blob/gh-pages/images/bug_issue_submit.png?raw=true">
